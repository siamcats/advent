name: Auto Assign Copilot

on:
  issues:
    types: [opened, labeled]

permissions:
  issues: write

jobs:
  assign-copilot:
    # 'auto-implement' ãƒ©ãƒ™ãƒ«ãŒä»˜ã„ãŸ Issue ã«è‡ªå‹•çš„ã« @copilot ã‚’ã‚¢ã‚µã‚¤ãƒ³
    if: contains(github.event.issue.labels.*.name, 'auto-implement')
    runs-on: ubuntu-latest
    timeout-minutes: 1
    
    steps:
      - name: Assign Copilot to Issue
        uses: actions/github-script@v7
        with:
          script: |
            // @Copilot ã‚’æ‹…å½“è€…ã¨ã—ã¦è¿½åŠ ï¼ˆå¤§æ–‡å­—ã®Cï¼‰
            await github.rest.issues.addAssignees({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.issue.number,
              assignees: ['Copilot']
            });
      
      - name: Comment on Issue
        uses: actions/github-script@v7
        with:
          script: |
            await github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: `ğŸ¤– **GitHub Copilot Code Agent ã‚’ã‚¢ã‚µã‚¤ãƒ³ã—ã¾ã—ãŸï¼**

            CopilotãŒè‡ªå‹•çš„ã«:
            1. âœ… Issueå†…å®¹ã‚’åˆ†æ
            2. âœ… ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
            3. âœ… ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè£…
            4. âœ… PRã‚’ä½œæˆ

            æ•°åˆ†ãŠå¾…ã¡ãã ã•ã„ã€‚CopilotãŒä½œæ¥­ã‚’é–‹å§‹ã—ã¾ã™...

            ---
            ğŸ’¡ JIRAã‹ã‚‰é€£æºã•ã‚ŒãŸIssueã®å ´åˆã€å®Ÿè£…å®Œäº†å¾Œã«JIRAã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚‚è‡ªå‹•æ›´æ–°ã•ã‚Œã¾ã™`
            });
